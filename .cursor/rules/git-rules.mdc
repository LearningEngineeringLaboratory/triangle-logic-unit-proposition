---
alwaysApply: true
---
ghコマンドを使用すること

## Git Commit Messages

* **形式**: `prefix: メッセージ`
* **Prefix**: 英語（Angular規約に準拠）
* **Message**: 日本語
* **50文字以内**（prefix含む）
* 文末に「。」やピリオドは付けない
* 内容は具体的かつ簡潔に

### Prefix 一覧

* `feat:` 新機能追加
* `fix:` バグ修正
* `docs:` ドキュメント変更
* `style:` コードスタイル変更（意味は変えない）
* `refactor:` リファクタリング（機能追加・修正なし）
* `perf:` パフォーマンス改善
* `test:` テスト関連
* `chore:` ビルド/CI/依存関係など
* `merge:` ブランチマージ

### 例

```
feat: 認証用のメールログインを追加
fix: ダークモード切り替え時の不具合を修正
docs: READMEに環境構築手順を追記
```

### Issue完了時のコミットメッセージ

* **形式**: `prefix: メッセージ #num`
* **num**: Issue番号
* **例**:
  ```
  feat: 問題一覧ページの実装完了 #9
  fix: データベース接続エラーの修正完了 #12
  docs: git-rules.mdcの更新完了 #8
  ```

---

## Pull Request タイトル

* **形式**: コミットと同じく `prefix: 日本語タイトル`
* 50文字程度以内
* 例:

  ```
  feat: ユーザー登録ページを追加
  fix: Supabase接続時のエラーを修正
  ```

---

## Issue タイトル

* **形式**: `prefix: 日本語タイトル`
* Issue内容が一目で分かるように
* 例:

  ```
  feat: 問題演習ページのUI設計
  chore: CIにLintチェックを追加
  ```

---

## ブランチ戦略

### ブランチ命名規則
* **形式**: `type/issue-number-short-description`
* **Type**: `feat`, `fix`, `docs`, `chore`, `setup`
* **例**:
  ```
  setup/1-nextjs-initialization
  feat/2-user-registration
  fix/3-triangle-logic-bug
  ```

### ブランチ構成
- **mainブランチ**: 本番環境用（developブランチから適宜マージ）
- **developブランチ**: 開発統合用（常に最新の開発状態を保持）
- **featブランチ**: 各機能開発用（developから作成）

### ブランチ運用フロー

#### 1. 機能開発の流れ
```bash
# 1. Issue作成
gh issue create --title "feat: 問題詳細ページとステップ型演習UI" --body "..."

# 2. developブランチを最新に更新
git checkout develop
git pull origin develop

# 3. featブランチを作成（developから）
git checkout -b feat/10-problem-detail-page

# 4. 開発作業
# ... 実装 ...

# 5. コミット（Angular規約に従う）
git add -A
git commit -m "feat: 問題詳細ページの動的ルーティングを実装 #10"

# 6. developブランチにマージ
git checkout develop
git merge feat/10-problem-detail-page
git push origin develop

# 7. featブランチを削除
git branch -d feat/10-problem-detail-page

# 8. Issueをクローズ
gh issue close 10 --comment "実装完了: 問題詳細ページが正常に動作することを確認しました。"
```

#### 2. 本番リリースの流れ
```bash
# 1. developブランチの内容をmainブランチにマージ
git checkout main
git pull origin main
git merge develop
git push origin main

# 2. タグを作成（リリース管理）
git tag -a v1.0.0 -m "リリース v1.0.0: 問題詳細ページ実装"
git push origin v1.0.0
```

#### 3. 緊急修正の流れ
```bash
# 1. 緊急Issue作成
gh issue create --title "fix: データベース接続エラーの修正" --body "..."

# 2. developブランチからfixブランチを作成
git checkout develop
git pull origin develop
git checkout -b fix/12-database-connection-error

# 3. 修正作業
# ... 修正 ...

# 4. コミット（Issue番号付き）
git add -A
git commit -m "fix: データベース接続エラーの修正完了 #12"

# 5. developブランチにマージ
git checkout develop
git merge fix/12-database-connection-error
git push origin develop

# 6. mainブランチにも即座にマージ（緊急のため）
git checkout main
git merge develop
git push origin main

# 7. fixブランチを削除
git branch -d fix/12-database-connection-error
```

### マージ戦略

#### developブランチ中心の開発
- **developブランチが常に最新の開発状態を保持**
- **mainブランチはdevelopブランチから適宜マージ**
- **featブランチは必ずdevelopから作成**

#### 本番リリースのタイミング
- **機能が完成した時点でdevelopからmainにマージ**
- **リリースタグを作成してバージョン管理**
- **緊急修正時は即座にmainにも反映**

#### マージコンフリクトの解決
```bash
# コンフリクト発生時
git status  # コンフリクトファイルを確認
# 各ファイルを手動で修正
git add -A
git commit -m "merge: featブランチをdevelopにマージ"
```

### ブランチ作成コマンド
```bash
# Issue番号を指定してブランチ作成
git checkout -b setup/1-nextjs-initialization

# または ghコマンドでIssueと連携
gh issue create --title "setup: Next.js初期セットアップ" --body "Next.js App Router + TypeScript + TailwindCSSの初期セットアップ"
gh issue view 1  # Issue番号を確認
git checkout -b setup/1-nextjs-initialization
```

---

## Issue管理

### Issue作成のタイミング
* **機能開発前**: 必ずIssueを作成してからブランチ作成
* **バグ発見時**: 即座にIssue作成
* **改善提案時**: 議論用Issue作成

### Issue作成テンプレート
```bash
# 機能開発用
gh issue create --title "feat: ユーザー登録機能" --body "## 概要
名前・メールアドレス入力によるユーザー登録機能

## 要件
- フォームバリデーション
- メール重複チェック
- セッション管理

## 受け入れ条件
- [ ] 名前・メール入力フォーム
- [ ] バリデーション機能
- [ ] 登録完了後のリダイレクト"

# セットアップ用
gh issue create --title "setup: Next.js初期セットアップ" --body "## 概要
Next.js App Router + TypeScript + TailwindCSSの初期セットアップ

## 作業内容
- [ ] Next.jsプロジェクト初期化
- [ ] 依存関係インストール
- [ ] 基本ディレクトリ構造作成
- [ ] ESLint/Prettier設定"
```

### Issueラベル
* `setup`: セットアップ・環境構築
* `feat`: 新機能
* `fix`: バグ修正
* `ui`: UI/UX関連
* `api`: API/バックエンド関連
* `db`: データベース関連
* `docs`: ドキュメント

---

## コードコメント

* **日本語で記述**
* チームメンバーが全員日本語を理解する前提のため、英語コメントは不要

---

## 運用のポイント

### 1. developブランチ中心の開発
- **developブランチが常に最新の開発状態を保持**
- **featブランチは必ずdevelopから作成**
- **機能完成後はdevelopにマージして統合**

### 2. 本番リリース管理
- **developブランチからmainブランチに適宜マージ**
- **リリースタグでバージョン管理**
- **mainブランチは常にデプロイ可能な状態を維持**

### 3. コミットの粒度
- **1つのコミットは1つの機能単位**
- **小さく頻繁にコミット**
- **意味のあるコミットメッセージを記述**

### 4. マージ後の処理
- **マージ完了後は必ずブランチを削除**
- **Issueを適切にクローズ**
- **動作確認を実施**

### 5. 緊急時の対応
- **緊急修正もdevelopブランチから開始**
- **修正後はdevelopとmainの両方に反映**
- **事後対応としてIssueを作成**

---